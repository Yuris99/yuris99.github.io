<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[강의정리] 데이터통신과네트워크 침입탐지시스템 - Yuris</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Jihun Hong"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Jihun Hong"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="네트워크 트래픽 분석과 악성코드 악성코드를 분석하는데 네트워크 트래픽 분석이 왜 필요할까? 악성코드는 네트워크 기술이 발달함에 따라 배포 및 명령 전달이 용이해짐 86년도부터 급격히 증가한 배경은 인터넷 기술의 발전 출현개수와 새로운 종의 출현은 인터넷 보급속도와 유사하게 증가    인터넷을 통한 악성코드 감염 경로 인터넷 브라우저 불법 크랙 프로그램 피"><meta property="og:type" content="blog"><meta property="og:title" content="[강의정리] 데이터통신과네트워크 침입탐지시스템"><meta property="og:url" content="https://yuris99.github.io/2021/12/09/intrust-detection/"><meta property="og:site_name" content="Yuris"><meta property="og:description" content="네트워크 트래픽 분석과 악성코드 악성코드를 분석하는데 네트워크 트래픽 분석이 왜 필요할까? 악성코드는 네트워크 기술이 발달함에 따라 배포 및 명령 전달이 용이해짐 86년도부터 급격히 증가한 배경은 인터넷 기술의 발전 출현개수와 새로운 종의 출현은 인터넷 보급속도와 유사하게 증가    인터넷을 통한 악성코드 감염 경로 인터넷 브라우저 불법 크랙 프로그램 피"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://yuris99.github.io/img/og_image.png"><meta property="article:published_time" content="2021-12-08T18:19:08.000Z"><meta property="article:modified_time" content="2021-12-09T02:59:20.116Z"><meta property="article:author" content="Jihun Hong"><meta property="article:tag" content="Computer Network"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://yuris99.github.io/2021/12/09/intrust-detection/"},"headline":"[강의정리] 데이터통신과네트워크 침입탐지시스템","image":["https://yuris99.github.io/img/og_image.png"],"datePublished":"2021-12-08T18:19:08.000Z","dateModified":"2021-12-09T02:59:20.116Z","author":{"@type":"Person","name":"Jihun Hong"},"publisher":{"@type":"Organization","name":"Yuris","logo":{"@type":"ImageObject","url":"https://yuris99.github.io/img/logo.svg"}},"description":"네트워크 트래픽 분석과 악성코드 악성코드를 분석하는데 네트워크 트래픽 분석이 왜 필요할까? 악성코드는 네트워크 기술이 발달함에 따라 배포 및 명령 전달이 용이해짐 86년도부터 급격히 증가한 배경은 인터넷 기술의 발전 출현개수와 새로운 종의 출현은 인터넷 보급속도와 유사하게 증가    인터넷을 통한 악성코드 감염 경로 인터넷 브라우저 불법 크랙 프로그램 피"}</script><link rel="canonical" href="https://yuris99.github.io/2021/12/09/intrust-detection/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Yuris" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Change Themes" href="https://github.com/ppoffice/hexo-theme-icarus">hi!<i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="카탈로그" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-12-08T18:19:08.000Z" title="2021. 12. 9. 오전 3:19:08">2021-12-09</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2021-12-09T02:59:20.116Z" title="2021. 12. 9. 오전 11:59:20">2021-12-09</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Lecture-Summary/">Lecture Summary</a><span> / </span><a class="link-muted" href="/categories/Lecture-Summary/Computer-Data-Network/">Computer Data Network</a></span></div></div><h1 class="title is-3 is-size-4-mobile">[강의정리] 데이터통신과네트워크 침입탐지시스템</h1><div class="content"><hr>
<h1 id="네트워크-트래픽-분석과-악성코드"><a href="#네트워크-트래픽-분석과-악성코드" class="headerlink" title="네트워크 트래픽 분석과 악성코드"></a>네트워크 트래픽 분석과 악성코드</h1><ul>
<li>악성코드를 분석하는데 네트워크 트래픽 분석이 왜 필요할까?<ul>
<li>악성코드는 네트워크 기술이 발달함에 따라 배포 및 명령 전달이 용이해짐</li>
<li>86년도부터 급격히 증가한 배경은 인터넷 기술의 발전</li>
<li>출현개수와 새로운 종의 출현은 인터넷 보급속도와 유사하게 증가</li>
</ul>
</li>
</ul>
<h2 id="인터넷을-통한-악성코드-감염-경로"><a href="#인터넷을-통한-악성코드-감염-경로" class="headerlink" title="인터넷을 통한 악성코드 감염 경로"></a>인터넷을 통한 악성코드 감염 경로</h2><ul>
<li>인터넷 브라우저</li>
<li>불법 크랙 프로그램</li>
<li>피싱/파밍</li>
<li>외부 문서의 매크로 </li>
</ul>
<h2 id="파악"><a href="#파악" class="headerlink" title="파악"></a>파악</h2><ul>
<li><p>네트워크 트래픽 분석을 통해 악성코드의 정확한 행위를 파악 가능</p>
<ul>
<li>대부분 악성코드는 네트워크 사용</li>
<li>DDoS 공격을 위한 좀비 PC를 모으거나, 특정사용자 파일 감시, 악의적인 파일 암호화등의 악성행위는 네트워크가 필요한 경우가 많음</li>
</ul>
</li>
<li><p>네트워크 트래픽을 통한 악성코드 통신 차단 기능</p>
<ul>
<li>방화벽을 통한 의심 ip, 포트 차단</li>
<li>Intrusion Detection System(IDS)를 통한 네트워크 공격 탐지 및 Intrusion Prevention System (IPS)를 통한 네트워크 트래픽 차단</li>
</ul>
</li>
</ul>
<h1 id="보안-관점에서-바라본-OSI-7계층"><a href="#보안-관점에서-바라본-OSI-7계층" class="headerlink" title="보안 관점에서 바라본 OSI 7계층"></a>보안 관점에서 바라본 OSI 7계층</h1><ul>
<li>L2: MAC</li>
<li>L3: IP</li>
<li>L4: 프로토콜(TCP/UDP)</li>
<li>L7: 페이로드</li>
</ul>
<h2 id="L2-계층"><a href="#L2-계층" class="headerlink" title="L2 계층"></a>L2 계층</h2><ul>
<li>데이터 링크 계층으로 MAC과 가장 관련이 깊음</li>
<li>Source MAC주소와 Destination MAC 주소를 보고 Switch에서 차단 가능</li>
</ul>
<h3 id="L2-방화벽"><a href="#L2-방화벽" class="headerlink" title="L2 방화벽"></a>L2 방화벽</h3><ul>
<li><p>L2와 가장 관계가 깊은 보안 시스템은 방화벽</p>
</li>
<li><p>일반적으로 방화벽의 경우 최소 2개 이상의 NIC 필요</p>
</li>
<li><p>장점</p>
<ul>
<li>L2 방화벽을 설치 할 때 일반적으로 네트워크 디자인을 바꾸지 않아도 됨</li>
</ul>
</li>
<li><p>단점</p>
<ul>
<li>동일한 네트워크 안에서만 가능, 다양한 네트워크 환경에는 적용 불가능</li>
</ul>
</li>
</ul>
<h2 id="L3-계층"><a href="#L3-계층" class="headerlink" title="L3 계층"></a>L3 계층</h2><ul>
<li><p>네트워크 계층으로 IP 주소와 연관 있음</p>
</li>
<li><p>하나의 네트워크 장비(e.g., 방화벽)를 통해 여러개의 네트워크 망을 구성</p>
<ul>
<li>NAT와 VLAN기술 필요</li>
</ul>
</li>
</ul>
<h3 id="L3-방화벽"><a href="#L3-방화벽" class="headerlink" title="L3 방화벽"></a>L3 방화벽</h3><ul>
<li><p>장점</p>
<ul>
<li>L2 방화벽에선 하지 못했던 좀 더 다양한 접근 제어 가능</li>
<li>NAT과 VLAN 활용</li>
</ul>
</li>
<li><p>단점</p>
<ul>
<li>L3 방화벽을 설치할 때 일반적으로 네트워크 디자인을 바꿔야 할 수도 있음</li>
</ul>
</li>
</ul>
<h2 id="L4-계층"><a href="#L4-계층" class="headerlink" title="L4 계층"></a>L4 계층</h2><ul>
<li>전송계층</li>
<li>패킷을 포트수준까지 확인</li>
</ul>
<h2 id="L7-계층"><a href="#L7-계층" class="headerlink" title="L7 계층"></a>L7 계층</h2><ul>
<li>L5는 세션계층, L6는 표현계층, L7은 응용계층<ul>
<li>요즘에는 L5,6,7을 통틀어 L7이라 부르기도 함</li>
</ul>
</li>
<li>L7 방화벽에서는 패킷 페이로드를 활용하여 운용 가능</li>
</ul>
<h1 id="방화벽"><a href="#방화벽" class="headerlink" title="방화벽"></a>방화벽</h1><ul>
<li>하드웨어 기반 방화벽: 여러대의 PC와 서버를 커버함</li>
<li>소프트웨어 기반 방화벽: 설치된 host PC만 보호</li>
</ul>
<h2 id="방화벽-1세대-방화벽"><a href="#방화벽-1세대-방화벽" class="headerlink" title="방화벽: 1세대 방화벽"></a>방화벽: 1세대 방화벽</h2><ul>
<li><p>패킷 필터링 기반의 1세대 방화벽 </p>
<table>
<thead>
<tr>
<th>src IP</th>
<th>dst IP</th>
<th>src Port</th>
<th>dst Port</th>
<th>Control</th>
</tr>
</thead>
<tbody><tr>
<td>any</td>
<td>1.1.1.1</td>
<td>any</td>
<td>80</td>
<td>permit</td>
</tr>
</tbody></table>
</li>
<li><p>80포트 listen</p>
</li>
<li><p>80포트에 대한 접근 허용(HTTP 포트)</p>
</li>
<li><p>무수히 많은 룰을 셋팅해야함</p>
</li>
<li><p>80번 포트를 열때 나가는 포트에 대해 많은 포트를 열어줘야함</p>
<ul>
<li>룰관리 이슈</li>
<li> 포트 개방에 따른 이슈</li>
</ul>
</li>
</ul>
<h2 id="방화벽-2세대-방화벽"><a href="#방화벽-2세대-방화벽" class="headerlink" title="방화벽: 2세대 방화벽"></a>방화벽: 2세대 방화벽</h2><ul>
<li><p>Stateful Inspection: TCP 접속 시 방화벽에서 패킷의 payload를 보면서 3way handshake의 state 추적, rule을 자동으로 추가</p>
</li>
<li><p>장점:</p>
<ul>
<li>Response 패킷에 대한 룰을 불필요하게 작성할필요 없음</li>
<li>동작하는 동안 checksum도 계산, 잘못된패킷은 폐기 가능</li>
</ul>
</li>
</ul>
<h2 id="방화벽-3세대-방화벽"><a href="#방화벽-3세대-방화벽" class="headerlink" title="방화벽: 3세대 방화벽"></a>방화벽: 3세대 방화벽</h2><ul>
<li><p>L7 방화멱 또는 애플리케이션 방화벽</p>
</li>
<li><p>실제 패킷 내용 검사, 단순한 포트/IP 조사뿐만 아니라 어떤 애플리케이션과 통신하고있는지 파악</p>
<ul>
<li>2세대 방화벽: 80/443 허용이나 차단 가능</li>
<li>3세대 방화벽: 페이스북 차단, 인스타 허용같은 룰 가능</li>
</ul>
</li>
<li><p>L2, L3, L4 모두 커버 가능하지만 성능 이슈로 L7에 집중하기도 함</p>
<ul>
<li>범용적인 서비스보단 오피스용</li>
</ul>
</li>
</ul>
<h2 id="방화벽-구성"><a href="#방화벽-구성" class="headerlink" title="방화벽 구성"></a>방화벽 구성</h2><ul>
<li>Intranet: 직원 내부망</li>
<li>서비스대역(DMZ): 네트워크 중립지역, 외부에 서비스를 제공할때 내부 네트워크와 분리시킨 공간</li>
</ul>
<h3 id="A구간-외부에서-서버-접속-서비스-대역으로-오는-접속"><a href="#A구간-외부에서-서버-접속-서비스-대역으로-오는-접속" class="headerlink" title="A구간: 외부에서 서버 접속 (서비스 대역으로 오는 접속)"></a>A구간: 외부에서 서버 접속 (서비스 대역으로 오는 접속)</h3><ul>
<li>외부로 공개된 웹서버가 존재하면, HTTP(80), HTTPS(443) 포트 허용</li>
<li>그밖의 모든 포트 차단 (E.g., RDP(3389), SSH(22))</li>
</ul>
<h3 id="B구간-내부망에서-서버로-접속"><a href="#B구간-내부망에서-서버로-접속" class="headerlink" title="B구간: 내부망에서 서버로 접속"></a>B구간: 내부망에서 서버로 접속</h3><ul>
<li>내부망에 존재하는 엔지니어들을 위해 다양한 제어 포트를 열어둠</li>
<li>E.g., HTTP(80), HTTPS(443), SSH(22), RDP(3389) 등</li>
</ul>
<h3 id="C구간-서버에서-외부망-접속"><a href="#C구간-서버에서-외부망-접속" class="headerlink" title="C구간: 서버에서 외부망 접속"></a>C구간: 서버에서 외부망 접속</h3><ul>
<li>서버 패치를 위해 Linux Repository 접근 허용</li>
<li>일반 사이트는 접속 불허용!</li>
</ul>
<h3 id="D구간-내부망에서-외부망으로-접속"><a href="#D구간-내부망에서-외부망으로-접속" class="headerlink" title="D구간: 내부망에서 외부망으로 접속"></a>D구간: 내부망에서 외부망으로 접속</h3><ul>
<li>서버 패치를 위해 Linux Repository 접근 허용</li>
<li>파일 유출 방지를 위해 구글드라이브, 네이버 드라이브 불허용</li>
<li>악성코드 감염 방지를 위해 악성 사이트 접근 불허용</li>
</ul>
<h3 id="High-Availability-HA"><a href="#High-Availability-HA" class="headerlink" title="High Availability (HA)"></a>High Availability (HA)</h3><ul>
<li><p>High Availability: 2대의 방화벽을 통해, 1개의 방화벽에 장애가 생길경우를 대비</p>
</li>
<li><p>한대는 온라인 상태, 한대는 대기/레디 상태 (Active-Standby)</p>
</li>
<li><p>두개가 항상 온라인 상태 (Active-Active)</p>
</li>
</ul>
<h3 id="바이패스-스위치"><a href="#바이패스-스위치" class="headerlink" title="바이패스 스위치"></a>바이패스 스위치</h3><ul>
<li> 방화벽에 장애가 생겼을 경우, 우회경로 만들어줌</li>
<li>보안보다 서비스가 중요하다고 판단될 경우</li>
</ul>
<h3 id="Full-Mesh"><a href="#Full-Mesh" class="headerlink" title="Full Mesh"></a>Full Mesh</h3><ul>
<li>네트워크 장비를 2대 이상 준비한 후, 모두 연결</li>
</ul>
<h3 id="방화벽-룰-관리"><a href="#방화벽-룰-관리" class="headerlink" title="방화벽 룰 관리"></a>방화벽 룰 관리</h3><ul>
<li>오래된 룰은 정기적으로 확인 후, 필요없는 경우 해당룰을 지워줌</li>
<li>룰이 겹치지 않도록 튜닝하는것도 필요</li>
</ul>
<hr>
<h1 id="침입탐지시스템"><a href="#침입탐지시스템" class="headerlink" title="침입탐지시스템"></a>침입탐지시스템</h1><h2 id="탐지-방법"><a href="#탐지-방법" class="headerlink" title="탐지 방법"></a>탐지 방법</h2><ul>
<li><p>Signature 기반 공격 탐지</p>
<ul>
<li>악성 공격의 일정한 패턴(Signature)을 탐지 룰에 추가함으로 공격을 탐지</li>
<li>알려지지 않은 공격을 탐지하지 못함</li>
<li>한계를 극복하기 위해 Anomaly 기반 공격 탐지가 설계됨</li>
</ul>
</li>
<li><p>Anomaly 기반 공격 탐지</p>
<ul>
<li>비정상적인 트래픽이 발생하면 공격으로 감지</li>
<li>E.g., 평소 IP주소당 최대 1Mbps, 어느날 20Mbps? 공격이다!</li>
<li>오탐존재</li>
</ul>
</li>
</ul>
<h3 id="Signature-기반-공격-탐지"><a href="#Signature-기반-공격-탐지" class="headerlink" title="Signature 기반 공격 탐지"></a>Signature 기반 공격 탐지</h3><ul>
<li>IDS는 다음과 같은 탐지 룰을 기반으로 작동<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Alert tcp any any -&gt; any any (msg: &quot;LoCAL-RULE Test for TestMyIDS&quot;;</span><br><span class="line">content: &quot;testmyids.com&quot;; classtype:misc-activity; sid:1000001;rev:1;)</span><br></pre></td></tr></table></figure></li>
<li>알람 조건<ul>
<li>Source ip 주소와 Destination ip 주소 any any</li>
<li>Source port number와 Destination port number any any</li>
<li>Payload에 “testmyids.com” 문구 포함</li>
</ul>
</li>
</ul>
<h3 id="Anomaly-기반-공격-탐지"><a href="#Anomaly-기반-공격-탐지" class="headerlink" title="Anomaly 기반 공격 탐지"></a>Anomaly 기반 공격 탐지</h3><ul>
<li>IPS 트래픽을 학습하는 방법: 다양한 Machine learning 기반 방법</li>
</ul>
<h2 id="IDS-종류"><a href="#IDS-종류" class="headerlink" title="IDS 종류"></a>IDS 종류</h2><ul>
<li><p>NIDS (Network-based IDS)</p>
<ul>
<li>네트워크 인프라를 기준으로 동작하는 IDS</li>
</ul>
</li>
<li><p>HIDS (Host-based IDS)</p>
<ul>
<li>Host를 관리하는 상황헤서 동작하는 IDS</li>
</ul>
</li>
<li><p>장점</p>
<ul>
<li>NIDS: 네트워크 전체를 한군데서 분석 가능</li>
<li>HIDS: Host별 상세 분석 가능, 사용자단위 분석도 가능</li>
</ul>
</li>
<li><p>단점</p>
<ul>
<li>NIDS: IDS를 경우한 공격만 확인 가능, 암호화된 트래픽도 못봄</li>
<li>HIDS: 개별로 관리해야함</li>
</ul>
</li>
</ul>
<h3 id="NIDS"><a href="#NIDS" class="headerlink" title="NIDS"></a>NIDS</h3><ul>
<li><p>탐지 위주 정책, 인라인으로 들어가지 않음(따로 삐져나와있음)</p>
<ul>
<li>장애를 예방하기위한 이중화 구성이 필수가아님</li>
<li>NIDS에 장애가 발생해도 네트워크 로그의 저장이 필요하면 이중화구성 해야함(Backup 장비 이용)</li>
</ul>
</li>
<li><p>NIDS에 필요한것: 전체 네트워크 패킷</p>
<ul>
<li>네트워크 패킷을 복사해서 IDS로 전송</li>
<li>Cisco에서는 트래픽복사하는 행위를 SPAN(Switch Port Analyzer)</li>
<li>대부분의 스위치가 SPAN or 포트미러링 제공</li>
</ul>
</li>
<li><p>HIDS의 경우 호스트 네트워크 패킷, 시스템 로그 필요</p>
</li>
</ul>
<h4 id="포트-미러링"><a href="#포트-미러링" class="headerlink" title="포트 미러링"></a>포트 미러링</h4><ul>
<li><p>스위치 환경에서 포트 미러링을 통해 스니핑(패킷 엿듣기) 제공</p>
<ul>
<li>스위치 환경에서 패킷 분석을 위해 스위치포트에 스니퍼 연결</li>
</ul>
</li>
<li><p>스위치가 포트미러링을 지원, 스니퍼를 연결하기 위한 포트가 있어야함</p>
<ul>
<li>포트 미러링을 할 때 미러링하는 포트의 처리율을 알아야 함.</li>
</ul>
</li>
</ul>
<h3 id="HIDS"><a href="#HIDS" class="headerlink" title="HIDS"></a>HIDS</h3><ul>
<li><p>HIDS 필요한것: 호스트 네트워크 데이터 + 시스템 로그 데이터</p>
</li>
<li><p>utmp(x) 로그</p>
<ul>
<li>utmp 데몬: utmp(x) 파일에 로그 남기는 프로그램</li>
<li>utmp 데몬은 리눅스의 가장 기본 로깅을 제공하는 데몬<ul>
<li>현재 시스템에 로그인한 사용자의 상태 출력</li>
</ul>
</li>
<li>utmp 데몬에 저장된 로그를 출력하는 명령: w, who, users, whodo, finger 등<ul>
<li>w: 현재 시스템에 로그인된 계정, 셸종류, 로그인시간, 실행중인 프로세스 종류</li>
<li>who: 접속한 시스템의 IP 확인</li>
</ul>
</li>
</ul>
</li>
<li><p>wtmp(x) 로그</p>
<ul>
<li>wtmp 데몬: wtmp(x) 파일에 로그 남김, /usr/include/utmp.h 파일 구조체 사용</li>
<li>utmp데몬과 비슷한 역할, 사용자들의 로그인,로그아웃,재부팅 정보 수록</li>
<li>last명령 이용</li>
</ul>
</li>
<li><p>su(switch user) 로그</p>
<ul>
<li>권한 변경에 대한 로그</li>
<li>cat /var/adm/sulog</li>
</ul>
</li>
<li><p>pacct 로그</p>
<ul>
<li>시스템에 로그인한 모든 사용자가 수행한 프로그램 정보 저장</li>
<li>acctcom 명령 이용<ul>
<li>root 계정으로 vi에디터 실행한 기록: acctcom -u root -n vi</li>
</ul>
</li>
</ul>
</li>
<li><p>lastcomm명령: 실행된 날짜 출력</p>
</li>
</ul>
<h3 id="리눅스-로그-분석과-설정"><a href="#리눅스-로그-분석과-설정" class="headerlink" title="리눅스 로그 분석과 설정"></a>리눅스 로그 분석과 설정</h3><ul>
<li><p>syslog</p>
<ul>
<li>시스템의 로그 정보를 대부분 수집해서 로깅</li>
<li>로그종류와 수준은 /etc/syslog.conf 파일</li>
</ul>
</li>
<li><p>authlog/loginlog</p>
<ul>
<li>실패한 로그인 시도에 대한 로깅 (loginlog 파일에 저장)</li>
<li>설정: etc/default/login, 재부팅후 적용</li>
</ul>
</li>
</ul>
<h2 id="IDS-vs-IPS"><a href="#IDS-vs-IPS" class="headerlink" title="IDS vs. IPS"></a>IDS vs. IPS</h2><ul>
<li><p>Intrusion Detection System</p>
</li>
<li><p>Intrusion Prevention System</p>
</li>
<li><p>IDS는 공격에 대한 블록기능 X, 탐지만 하는경우가 많음</p>
</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>IPS</th>
<th>IDS</th>
</tr>
</thead>
<tbody><tr>
<td>시스템 타입</td>
<td>액티브(모니터링, 차단까지)</td>
<td>패시브(모니터링, 경고)</td>
</tr>
<tr>
<td>매커니즘</td>
<td>Anomaly based detection\nSigniture detection</td>
<td>Anomaly based detection\nSigniture detection</td>
</tr>
<tr>
<td>위치</td>
<td>Inline형태로 설치</td>
<td>Out of band</td>
</tr>
<tr>
<td>대응방법</td>
<td>경고를 주거나 패킷을 Drop</td>
<td>알람 보냄</td>
</tr>
<tr>
<td>퍼포먼스 영향</td>
<td>패킷속도에 저하가 생길 수 있음</td>
<td>복사해서 분석하기 때문에 퍼포먼스적 영향 X</td>
</tr>
<tr>
<td>benefits</td>
<td>자동화되고, 방지도 되기 때문에 회사에서 선호</td>
<td>IPS가 차단할 합법적인 traffic을 차단하지 않음</td>
</tr>
</tbody></table>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Computer-Network/">Computer Network</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/12/09/dataNetwork-password/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[강의정리] 데이터통신과네트워크 네트워크와 암호</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/12/08/dataNetwork-link/"><span class="level-item">[강의정리] 데이터통신과네트워크 Link Layer</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">댓글</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "e1c19c6dbfe51bfb30d1b27bbef23cbf",
            repo: "yuris99.github.io",
            owner: "yuris99",
            clientID: "82a6a8c340c16a0049b8",
            clientSecret: "79a7021606c3d95b487b75348d55505eee545664",
            admin: ["yuris99"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">카탈로그</h3><ul class="menu-list"><li><a class="level is-mobile" href="#네트워크-트래픽-분석과-악성코드"><span class="level-left"><span class="level-item">1</span><span class="level-item">네트워크 트래픽 분석과 악성코드</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#인터넷을-통한-악성코드-감염-경로"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">인터넷을 통한 악성코드 감염 경로</span></span></a></li><li><a class="level is-mobile" href="#파악"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">파악</span></span></a></li></ul></li><li><a class="level is-mobile" href="#보안-관점에서-바라본-OSI-7계층"><span class="level-left"><span class="level-item">2</span><span class="level-item">보안 관점에서 바라본 OSI 7계층</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#L2-계층"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">L2 계층</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#L2-방화벽"><span class="level-left"><span class="level-item">2.1.1</span><span class="level-item">L2 방화벽</span></span></a></li></ul></li><li><a class="level is-mobile" href="#L3-계층"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">L3 계층</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#L3-방화벽"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">L3 방화벽</span></span></a></li></ul></li><li><a class="level is-mobile" href="#L4-계층"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">L4 계층</span></span></a></li><li><a class="level is-mobile" href="#L7-계층"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">L7 계층</span></span></a></li></ul></li><li><a class="level is-mobile" href="#방화벽"><span class="level-left"><span class="level-item">3</span><span class="level-item">방화벽</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#방화벽-1세대-방화벽"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">방화벽: 1세대 방화벽</span></span></a></li><li><a class="level is-mobile" href="#방화벽-2세대-방화벽"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">방화벽: 2세대 방화벽</span></span></a></li><li><a class="level is-mobile" href="#방화벽-3세대-방화벽"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">방화벽: 3세대 방화벽</span></span></a></li><li><a class="level is-mobile" href="#방화벽-구성"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">방화벽 구성</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#A구간-외부에서-서버-접속-서비스-대역으로-오는-접속"><span class="level-left"><span class="level-item">3.4.1</span><span class="level-item">A구간: 외부에서 서버 접속 (서비스 대역으로 오는 접속)</span></span></a></li><li><a class="level is-mobile" href="#B구간-내부망에서-서버로-접속"><span class="level-left"><span class="level-item">3.4.2</span><span class="level-item">B구간: 내부망에서 서버로 접속</span></span></a></li><li><a class="level is-mobile" href="#C구간-서버에서-외부망-접속"><span class="level-left"><span class="level-item">3.4.3</span><span class="level-item">C구간: 서버에서 외부망 접속</span></span></a></li><li><a class="level is-mobile" href="#D구간-내부망에서-외부망으로-접속"><span class="level-left"><span class="level-item">3.4.4</span><span class="level-item">D구간: 내부망에서 외부망으로 접속</span></span></a></li><li><a class="level is-mobile" href="#High-Availability-HA"><span class="level-left"><span class="level-item">3.4.5</span><span class="level-item">High Availability (HA)</span></span></a></li><li><a class="level is-mobile" href="#바이패스-스위치"><span class="level-left"><span class="level-item">3.4.6</span><span class="level-item">바이패스 스위치</span></span></a></li><li><a class="level is-mobile" href="#Full-Mesh"><span class="level-left"><span class="level-item">3.4.7</span><span class="level-item">Full Mesh</span></span></a></li><li><a class="level is-mobile" href="#방화벽-룰-관리"><span class="level-left"><span class="level-item">3.4.8</span><span class="level-item">방화벽 룰 관리</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#침입탐지시스템"><span class="level-left"><span class="level-item">4</span><span class="level-item">침입탐지시스템</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#탐지-방법"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">탐지 방법</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Signature-기반-공격-탐지"><span class="level-left"><span class="level-item">4.1.1</span><span class="level-item">Signature 기반 공격 탐지</span></span></a></li><li><a class="level is-mobile" href="#Anomaly-기반-공격-탐지"><span class="level-left"><span class="level-item">4.1.2</span><span class="level-item">Anomaly 기반 공격 탐지</span></span></a></li></ul></li><li><a class="level is-mobile" href="#IDS-종류"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">IDS 종류</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#NIDS"><span class="level-left"><span class="level-item">4.2.1</span><span class="level-item">NIDS</span></span></a></li><li><a class="level is-mobile" href="#HIDS"><span class="level-left"><span class="level-item">4.2.2</span><span class="level-item">HIDS</span></span></a></li><li><a class="level is-mobile" href="#리눅스-로그-분석과-설정"><span class="level-left"><span class="level-item">4.2.3</span><span class="level-item">리눅스 로그 분석과 설정</span></span></a></li></ul></li><li><a class="level is-mobile" href="#IDS-vs-IPS"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">IDS vs. IPS</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Algorithm/"><span class="level-start"><span class="level-item">Algorithm</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/Algorithm/Codeforces/"><span class="level-start"><span class="level-item">Codeforces</span></span><span class="level-end"><span class="level-item tag">7</span></span></a><ul><li><a class="level is-mobile" href="/categories/Algorithm/Codeforces/Problems/"><span class="level-start"><span class="level-item">Problems</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/Lecture-Summary/"><span class="level-start"><span class="level-item">Lecture Summary</span></span><span class="level-end"><span class="level-item tag">26</span></span></a><ul><li><a class="level is-mobile" href="/categories/Lecture-Summary/Advanced-Computer-Math/"><span class="level-start"><span class="level-item">Advanced Computer Math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Lecture-Summary/Algorithm/"><span class="level-start"><span class="level-item">Algorithm</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/Lecture-Summary/Computer-Data-Network/"><span class="level-start"><span class="level-item">Computer Data Network</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Lecture-Summary/Information-Science/"><span class="level-start"><span class="level-item">Information Science</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Computer-Math/"><span class="tag">Computer Math</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Computer-Network/"><span class="tag">Computer Network</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Div-2/"><span class="tag">Div.2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Div-3/"><span class="tag">Div.3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Information-Science/"><span class="tag">Information Science</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Problem-Solve/"><span class="tag">Problem Solve</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/summary/"><span class="tag">summary</span><span class="tag">2</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Yuris" height="28"></a><p class="is-size-7"><span>&copy; 2021 Jihun Hong</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/yuris99"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>